{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/caribdigital/graphhansard/schemas/alias-submission.json",
  "title": "Alias Submission Schema",
  "description": "JSON schema for community-submitted alias additions and corrections (GR-9)",
  "type": "object",
  "required": [
    "contribution_type",
    "proposed_alias",
    "target_node_id",
    "source_evidence",
    "submitter_name"
  ],
  "properties": {
    "contribution_type": {
      "type": "string",
      "enum": ["alias_addition", "alias_correction"],
      "description": "Type of contribution: addition or correction"
    },
    "proposed_alias": {
      "type": "string",
      "minLength": 1,
      "description": "The alias being proposed (e.g., 'Papa', 'The PM')",
      "examples": ["Papa", "The PM", "Brave", "The Minister"]
    },
    "target_node_id": {
      "type": "string",
      "pattern": "^mp_[a-z_]+$",
      "description": "The node_id this alias refers to",
      "examples": ["mp_davis_brave", "mp_cooper_chester"]
    },
    "source_evidence": {
      "type": "string",
      "minLength": 10,
      "description": "Evidence for this alias: URL to parliamentary video, Hansard citation, news article, etc.",
      "examples": [
        "Used in House debate 2024-01-15, video at https://youtube.com/watch?v=...",
        "Hansard transcript page 45, Session 2024-03-12",
        "Common usage in parliamentary proceedings"
      ]
    },
    "submitter_name": {
      "type": "string",
      "minLength": 1,
      "description": "Name of the person submitting (can be anonymous)",
      "examples": ["Jane Doe", "Anonymous", "Community Member"]
    },
    "submitter_email": {
      "type": ["string", "null"],
      "format": "email",
      "description": "Optional email for follow-up"
    },
    "notes": {
      "type": ["string", "null"],
      "description": "Additional context or notes"
    },
    "submission_id": {
      "type": ["string", "null"],
      "description": "Unique ID (auto-generated by system)"
    },
    "submitted_at": {
      "type": ["string", "null"],
      "format": "date-time",
      "description": "ISO timestamp (auto-generated by system)"
    },
    "status": {
      "type": "string",
      "enum": ["pending", "approved", "rejected"],
      "default": "pending",
      "description": "Review status"
    },
    "reviewer_notes": {
      "type": ["string", "null"],
      "description": "Notes from reviewer"
    }
  },
  "examples": [
    {
      "contribution_type": "alias_addition",
      "proposed_alias": "Papa",
      "target_node_id": "mp_davis_brave",
      "source_evidence": "Used frequently in House debates, https://youtube.com/watch?v=example",
      "submitter_name": "Jane Doe",
      "submitter_email": "jane@example.com",
      "notes": "This nickname is commonly used by both government and opposition MPs"
    },
    {
      "contribution_type": "alias_correction",
      "proposed_alias": "The PM",
      "target_node_id": "mp_davis_brave",
      "source_evidence": "Common abbreviation in parliamentary proceedings",
      "submitter_name": "Community Member"
    }
  ]
}
